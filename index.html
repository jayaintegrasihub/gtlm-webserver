<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="favicon.ico">
  <title>Telemetric GTLM | Webserver</title>
</head>

<body style="max-width: 400px; margin:auto;">
  <header id="header" class="header">
    <div style="display: flex; justify-content: space-between;padding: 20px 20px;align-items: center;">
      <svg width="121" height="23" viewBox="0 0 121 23" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M8.88542 0.000373535C9.16365 0.00704704 9.43242 0.102695 9.65232 0.273289C9.87222 0.443884 10.0317 0.680448 10.1073 0.94829L13.7263 13.7802C13.9965 14.7384 15.3485 14.7561 15.6438 13.8052L18.0281 6.12537C18.1065 5.87353 18.2595 5.65142 18.4669 5.48845C18.6742 5.32548 18.9262 5.22933 19.1895 5.21273C19.4527 5.19613 19.7148 5.25986 19.941 5.39549C20.1672 5.53112 20.3469 5.73224 20.4563 5.97225L22.4471 10.3517C22.6094 10.7087 22.9653 10.9379 23.3574 10.9379H25.7813C26.1266 10.9379 26.4578 11.0751 26.702 11.3192C26.9462 11.5634 27.0833 11.8946 27.0833 12.24C27.0833 12.5853 26.9462 12.9165 26.702 13.1607C26.4578 13.4049 26.1266 13.542 25.7813 13.542H21.875C21.625 13.542 21.3802 13.47 21.17 13.3346C20.9598 13.1992 20.793 13.0062 20.6896 12.7785L20.5879 12.5549C20.2076 11.7182 18.9949 11.7946 18.7225 12.6723L15.8271 22.0014C15.7438 22.2696 15.576 22.5037 15.3488 22.6688C15.1215 22.8338 14.847 22.921 14.5662 22.9172C14.2854 22.9135 14.0133 22.819 13.7905 22.648C13.5678 22.4769 13.4063 22.2384 13.3302 21.9681L9.63291 8.86146C9.3655 7.91351 8.0332 7.88236 7.72177 8.81677L6.44375 12.6514C6.35737 12.9108 6.19157 13.1363 5.96983 13.2962C5.7481 13.456 5.48168 13.5421 5.20833 13.542H1.30208C0.956749 13.542 0.625559 13.4049 0.381371 13.1607C0.137183 12.9165 0 12.5853 0 12.24C0 11.8946 0.137183 11.5634 0.381371 11.3192C0.625559 11.0751 0.956749 10.9379 1.30208 10.9379H3.54903C3.97946 10.9379 4.3616 10.6624 4.49772 10.2541L7.61875 0.890999C7.70675 0.626521 7.8773 0.397262 8.10531 0.236941C8.33332 0.0766204 8.60676 -0.00630084 8.88542 0.000373535Z"
          fill="white" />
        <path d="M32.3418 4.75H29.4668V2.25H37.9668V4.75H35.0918V19.75H32.3418V4.75Z" fill="white" />
        <path d="M39.2982 2.25H46.7982V4.75H42.0482V9.375H45.8232V11.875H42.0482V17.25H46.7982V19.75H39.2982V2.25Z"
          fill="white" />
        <path d="M48.3803 2.25H51.1303V17.25H55.6553V19.75H48.3803V2.25Z" fill="white" />
        <path d="M56.974 2.25H64.474V4.75H59.724V9.375H63.499V11.875H59.724V17.25H64.474V19.75H56.974V2.25Z"
          fill="white" />
        <path
          d="M66.0561 2.25H69.9811L71.7311 14.775H71.7811L73.5311 2.25H77.4561V19.75H74.8561V6.5H74.8061L72.8061 19.75H70.5061L68.5061 6.5H68.4561V19.75H66.0561V2.25Z"
          fill="white" />
        <path d="M79.5082 2.25H87.0082V4.75H82.2582V9.375H86.0332V11.875H82.2582V17.25H87.0082V19.75H79.5082V2.25Z"
          fill="white" />
        <path d="M90.7402 4.75H87.8652V2.25H96.3652V4.75H93.4902V19.75H90.7402V4.75Z" fill="white" />
        <path
          d="M97.6967 2.25H101.772C103.188 2.25 104.222 2.58333 104.872 3.25C105.522 3.9 105.847 4.90833 105.847 6.275V7.35C105.847 9.16667 105.247 10.3167 104.047 10.8V10.85C104.713 11.05 105.18 11.4583 105.447 12.075C105.73 12.6917 105.872 13.5167 105.872 14.55V17.625C105.872 18.125 105.888 18.5333 105.922 18.85C105.955 19.15 106.038 19.45 106.172 19.75H103.372C103.272 19.4667 103.205 19.2 103.172 18.95C103.138 18.7 103.122 18.25 103.122 17.6V14.4C103.122 13.6 102.988 13.0417 102.722 12.725C102.472 12.4083 102.03 12.25 101.397 12.25H100.447V19.75H97.6967V2.25ZM101.447 9.75C101.997 9.75 102.405 9.60833 102.672 9.325C102.955 9.04167 103.097 8.56667 103.097 7.9V6.55C103.097 5.91667 102.98 5.45833 102.747 5.175C102.53 4.89167 102.18 4.75 101.697 4.75H100.447V9.75H101.447Z"
          fill="white" />
        <path d="M107.78 2.25H110.53V19.75H107.78V2.25Z" fill="white" />
        <path
          d="M116.464 20C115.148 20 114.139 19.625 113.439 18.875C112.756 18.125 112.414 17.0667 112.414 15.7V6.3C112.414 4.93333 112.756 3.875 113.439 3.125C114.139 2.375 115.148 2 116.464 2C117.781 2 118.781 2.375 119.464 3.125C120.164 3.875 120.514 4.93333 120.514 6.3V8.15H117.914V6.125C117.914 5.04167 117.456 4.5 116.539 4.5C115.623 4.5 115.164 5.04167 115.164 6.125V15.9C115.164 16.9667 115.623 17.5 116.539 17.5C117.456 17.5 117.914 16.9667 117.914 15.9V13.225H120.514V15.7C120.514 17.0667 120.164 18.125 119.464 18.875C118.781 19.625 117.781 20 116.464 20Z"
          fill="white" />
      </svg>
      <p style="color: white; font-weight: 400;">Gateway</p>


    </div>
  </header>
  <main>
    <div class="main-wrapper">
      <div style="display: flex;flex-direction: row;gap: 20px; align-items: top;">
        <img src="img/node-icon.png"
          style="width:180px;height: max-content;border: 1px solid #E1E1E1;border-radius: 10px;">
        <div style="display: flex; flex-direction: column;justify-content: space-between;">
          <div style="display: flex; flex-direction: column; gap: 10px;">
            <p style="font-size: 14px;font-weight: 400;margin-bottom: 4px;">Device Name</p>
            <p id="deviceName" style="font-size: 15px;font-weight: 600;">-</p>
          </div>
          <div style="display: flex; flex-direction: column; gap: 10px;">
            <p style="font-size: 14px;font-weight: 400;margin-bottom: 4px;">Series</p>
            <p id="series" style="font-size: 15px;font-weight: 600;">-</p>
          </div>
          <div style="display: flex; flex-direction: column; gap: 10px;">
            <p style="font-size: 14px;font-weight: 400;margin-bottom: 4px;">Serial Number</p>
            <p id="serialNumber" style="font-size: 15px;font-weight: 600;">-</p>
          </div>
        </div>
      </div>
      <p style="align-self: center; font-size: 16px;font-weight: 600; margin: 20px 10px 0px;">Configuration</p>
      <div class="button-wrapper">
        <button class="button" onclick="window.location.href = '/transmissionConfig.html'">Network
          Configuration</button>
        <button class="button" onclick="window.location.href = '/mqttConfig.html'">MQTT Configuration</button>
        <button class="button" onclick="window.location.href = '/serialConfig.html'">Serial Configuration</button>
        <button class="button" onclick="window.location.href = '/analogConfig.html'">Analog Configuration</button>
        <button class="button" onclick="window.location.href = '/firmwareUpdate.html'">Firmware Update</button>
        <button class="button" onclick="window.location.href = '/rtcSync.html'">RTC Synchronize</button>
        <button class="button" onclick="window.location.href = '/systemSetting.html'">System Config</button >
      </div>

    </div>
    <div class="info-wrapper">
      <button class="accordion" style="font-weight: 600;">General Info</button>
      <div class="panel">
        <div class="panel-items">
          <p>Firmware Version:</p>
          <div
            style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
            <h1 id="fwVer">-</h1>
          </div>
        </div>
        <div class="panel-items">
          <p>Hardware Version:</p>
          <div
            style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
            <h1 id="hwVer">-</h1>
          </div>
        </div>
        <div class="panel-items">
          <p>Server Protocol Version:</p>
          <div
            style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
            <h1 id="spVer">-</h1>
          </div>
        </div>
      </div>

      <button class="accordion" style="font-weight: 600;">Transmission Info</button>
      <div class="panel">
        <div class="panel-items">
          <p>Transmission Mode:</p>
          <div
            style="display: flex; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
            <h1 id="transmissionMode">-</h1>
          </div>
        </div>

        <div style="display: none; flex-direction: column; gap: 14px;" id="modem-mode">
          <div class="panel-items">
            <p>Modem APN:</p>
            <div
              style="display: flex; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
              <h1 id="modemApn">-</h1>
            </div>
          </div>
          <div class="panel-items">
            <p>Modem Username:</p>
            <div
              style="display: flex; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
              <h1 id="modemUser">-</h1>
            </div>
          </div>
          <div class="panel-items">
            <p>Modem Password:</p>
            <div
              style="display: flex; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
              <h1 id="modemPass">-</h1>
            </div>
          </div>
        </div>

        <div style="display: none; flex-direction: column; gap: 14px;" id="network-config">
          <div id="eth-mode" style="display: flex;flex-direction: column;gap: 10px;">
            <div class="panel-items">
              <p>IP Mode:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 class="ethMode" id="ethMode">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>IP Address:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 class="ethIp" id="ethIp">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Subnet Mask:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 class="ethNetmask" id="ethNetmask">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Gateway Address:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 class="ethGateway" id="ethGateway">-</h1>
              </div>
            </div>
          </div>

          <div id="wifi-mode" style="display: flex;flex-direction: column;gap: 10px;">
            <div class="panel-items">
              <p>SSID:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 class="staSsid" id="staSsid">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Password:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 class="staPass" id="staPass">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>IP Mode:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 class="staMode" id="staMode">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>IP Address:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 class="staIp" id="staIp">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Subnet Mask:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 class="staNetmask" id="staNetmask">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Gateway Address:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 class="staGateway" id="staGateway">-</h1>
              </div>
            </div>
          </div>

          <div style="display: flex; flex-direction: column; gap: 14px;" id="mqtt-config">
            <div class="panel-items">
              <p>Client ID:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="clientId">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Host Address:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="hostAddr">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Port Number:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="portNum">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Username:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="user">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Password:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="pass">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>QoS:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="qos">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Connect Timeout:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="connTmOut">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Reconnect Timeout:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="reconnTmOut">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Will Topic:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="willTopic">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Will QOS:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="willQos">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Will Retain:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="willRet">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Will Payload:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="willPayload">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Keep Alive:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="keepAlive">-</h1>
              </div>
            </div>
            <div class="panel-items">
              <p>Clean Session:</p>
              <div
                style="display: flex;align-items: center; gap: 10px; padding: 6px 8px;border: grey;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;">
                <h1 id="cleanSession">-</h1>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- <div class="error-info" style="border-top: 1px solid #F0F0F0;padding-top: 20px;">
        <p style="font-weight: 600;">Errors</p>
        <div id="errorsContainer"
          style="display: flex;flex-wrap:wrap ;gap: 8px; margin-top: 8px;padding-bottom: 100px;">
        </div>
      </div> -->
    </div>
  </main>
</body>

<script type="module">
  import './style/style.css'
  import { parseStringToObject, parseStringToArray } from './script/stringParser'
  import { getApiData, postApiData } from './script/api'

  const ipMode = ['Dynamic', ' Static']
  const transmissionMode = ['Modem', 'Ethernet', 'Wifi']
  const baudRate = ['2400', '4800', '9600', '14400', '19200', '115200']
  const databits = ['8', '7']
  const parity = ['None', 'Odd', 'Even']
  const stopbits = ['1', '2']
  const type = ['Unsigned', 'Unsigned', 'Signed', 'Long Inverse', ' Float Big Endian', 'Float Little Endian']
  const fn = ['Read Coil Status', 'Read Input Status', 'Read Holding Registers', 'Read Internal Registers', 'Force Single Coil', 'Preset Single Register', 'Force Multiple Coils', 'Preset Multiple Registers', 'Masked Write Register']

  let getTimeInterval

  window.onload = () => {
    // getAllData()
    getTransmissionInfo()
    getGeneralInfo()
    getMqttInfo()
    // getTimeInterval = setInterval(getAllData, 3000)
  }

  window.onabort = () => {
    clearInterval(getTimeInterval)
  }

  function getAllData() {
    getError()
  }


  function getGeneralInfo() {
    const apiUrl = '/general-info'
    getApiData(apiUrl)
      .then((data) => {
        let generalInfoData = parseStringToObject(data)
        console.log('GET Data:', generalInfoData);
        document.getElementById("deviceName").innerHTML = generalInfoData.deviceName
        document.getElementById("series").innerHTML = generalInfoData.series
        document.getElementById("serialNumber").innerHTML = generalInfoData.serialNumber
        document.getElementById("fwVer").innerHTML = generalInfoData.fwVer
        document.getElementById("hwVer").innerHTML = generalInfoData.hwVer
        document.getElementById("spVer").innerHTML = generalInfoData.spVer
      })
      .catch((error) => {
        console.error('GET Error:', error.message);
      })
  }

  function getTransmissionInfo() {
    const apiUrl = '/transmission-mode'
    getApiData(apiUrl)
      .then((data) => {
        let transmissionInfodata = parseStringToObject(data)

        console.log(transmissionInfodata)
        console.log('GET Data:', transmissionInfodata);
        document.getElementById('transmissionMode').innerHTML = transmissionMode[transmissionInfodata.transmissionMode]

        switch (transmissionInfodata.transmissionMode) {
          case "0":
            document.getElementById('modem-mode').style.display = 'flex'
            document.getElementById('modemApn').innerHTML = transmissionInfodata.modemApn
            document.getElementById('modemUser').innerHTML = transmissionInfodata.modemUser
            document.getElementById('modemPass').innerHTML = transmissionInfodata.modemPass
            break;
          case "1":
            document.getElementById('network-config').style.display = 'flex'
            document.getElementById('eth-mode').style.display = 'flex'
            document.getElementById('wifi-mode').style.display = 'none'
            document.getElementById('ethMode').innerHTML = ipMode[transmissionInfodata.ethMode]

            switch (transmissionInfodata.ethMode) {
              case '0':
                document.getElementById("ethIp").style.display = '-'
                document.getElementById("ethNetmask").innerHTML = '-'
                document.getElementById("ethGateway").innerHTML = '-'
                break;
              case '1':
                document.getElementById("ethIp").innerHTML = transmissionInfodata.ethIp
                document.getElementById("ethNetmask").innerHTML = transmissionInfodata.ethNetmask
                document.getElementById("ethGateway").innerHTML = transmissionInfodata.ethGateway
                break;
            }
            break;

          case "2":
            document.getElementById('network-config').style.display = 'flex'
            document.getElementById('wifi-mode').style.display = 'flex'
            document.getElementById('eth-mode').style.display = 'none'
            document.getElementById('staMode').innerHTML = ipMode[transmissionInfodata.staMode]
            document.getElementById('staSsid').innerHTML = transmissionInfodata.staSsid
            document.getElementById('staPass').innerHTML = transmissionInfodata.staPass

            switch (transmissionInfodata.staMode) {
              case '0':
                document.getElementById("staIp").style.display = '-'
                document.getElementById("staNetmask").innerHTML = '-'
                document.getElementById("staGateway").innerHTML = '-'
                break;
              case '1':
                document.getElementById("staIp").innerHTML = transmissionInfodata.staIp
                document.getElementById("staNetmask").innerHTML = transmissionInfodata.staNetmask
                document.getElementById("staGateway").innerHTML = transmissionInfodata.staGateway
                break;
            }
            break;
        }

      })
      .catch((error) => {
        console.error('GET Error:', error.message);
      })
  }

  function getError() {
    const apiUrl = "/error-info";
    getApiData(apiUrl)
      .then((data) => {
        let errorInfoData = null
        if (data.includes('no error')) {
          errorInfoData = [];
        } else {
          errorInfoData = parseStringToArray(data);
        }
        console.log("GET Data:", errorInfoData);
        initialErrorsView(errorInfoData);
      })
      .catch((error) => {
        console.error("GET Error:", error.message);
      });
  }


  function initialErrorsView(data) {
    const errorsContainer = document.getElementById(`errorsContainer`);
    if (data.length !== 0) {
      const channelList = data.map((data, index) => {
        const item = `
            <div
              style="display: flex; gap: 10px; padding: 10px 12px;border: white;border-width: 1px; border-style: solid; border-radius: 4px;width: fit-content;
              background: #F22A1A;">
              <p style="color: white;">E ${data[1]}</p>
            </div>
        `;
        return item;
      });
      errorsContainer.innerHTML = channelList.join("</hr>");
    } else {
      const content = `
            <div
              style="display: flex; gap: 10px; padding: 10px 12px;background: #5cb85c;border-radius: 4px;width: fit-content;">
              <p style="color:white;">No Error</p>
            </div>
        `;

      errorsContainer.innerHTML = content
    }
  }

  var acc = document.getElementsByClassName("accordion");
  var i;

  for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function () {
      this.classList.toggle("active");
      var panel = this.nextElementSibling;
      if (panel.style.maxHeight) {
        panel.style.maxHeight = null;
      } else {
        panel.style.maxHeight = panel.scrollHeight + "px";
      }
    });
  }



  function getMqttInfo() {
    const apiUrl = '/mqtt-config'
    getApiData(apiUrl)
      .then((data) => {
        let mqttInfoData = parseStringToObject(data)
        console.log('GET Data:', mqttInfoData);
        document.getElementById("clientId").innerHTML = mqttInfoData.clientId
        document.getElementById("hostAddr").innerHTML = mqttInfoData.hostAddr
        document.getElementById("portNum").innerHTML = mqttInfoData.portNum
        document.getElementById("user").innerHTML = mqttInfoData.user
        document.getElementById("pass").innerHTML = mqttInfoData.pass
        document.getElementById("qos").innerHTML = mqttInfoData.qos
        document.getElementById("connTmOut").innerHTML = mqttInfoData.connTmOut
        document.getElementById("reconnTmOut").innerHTML = mqttInfoData.reconnTmOut
        document.getElementById("willTopic").innerHTML = mqttInfoData.willTopic
        document.getElementById("willQos").innerHTML = mqttInfoData.willQos
        document.getElementById("willRet").innerHTML = mqttInfoData.willRet
        document.getElementById("willPayload").innerHTML = mqttInfoData.willPayload
        document.getElementById("keepAlive").innerHTML = mqttInfoData.keepAlive
        document.getElementById("cleanSession").innerHTML = mqttInfoData.cleanSession

      })
      .catch((error) => {
        console.error('GET Error:', error.message);
      })

  }
</script>

<style>
  .panel-items {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .wifi {
    display: none;
    flex-direction: column;
    gap: 4px;
  }
</style>

</html>